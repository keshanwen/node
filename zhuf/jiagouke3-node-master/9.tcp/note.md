## 七层网络模型 （核心就是复杂的内容简单化）

> 下层是为上层提供服务的 

- 物理层：（网线、光纤、电缆） 传输数据 bit流 （二进制数据 0 ， 1）
- 数据链路层 中转站（交换机， 网卡） 将多台设备连接起来， 做数据交换的  
- 网络层 （路由器） 路由器具备访问外网的能力 （网关） 数据的交换速度不如交换机的
- 传输层  传送数据， 分段传输 （传输的过程中数据丢了怎么，控制传递的速率）
- （会话层、表示层、应用层） 最终都合成了一层

> 没有应用层是否可以传递数据 （应用层的目的主要就是添加一些信息用于数据识别）

先准备好数据 -》 进行数据的传输  -》寻址 -》 需要通过物理设备来进行传输

- 主要在传输层 ： 核心特点就是将数据进行拆分 （需要增加序列号，因为数据再发送的过程不知道先后到达的顺序，端口）   **TCP段**
- 网络层 增加`ip`头  增加`ip`信息  **`ip`包**
- 物理设备 数据链路层、物理层  **mac地址**  帧  1500字节 不同的网络数值不同 （最大一次传递1500个字 `MTU`）



- `IP`地址： 链接到路由的时候会通过`dhcp`协议 分配`ip` (`ipv4`, `ipv6`)   (划分子网) `ipv6`    `2^2  `  `2^28`

- `mac`地址：原则上是唯一的，我们可以通过mac地址进行通信， 通过`ip`找到对应的mac地址, `arp` 地址解析协议 根据`ip`可以查找到对应的mac地址  （`arp`会缓存mac地址对应的`ip`地址） 交换机缓存的mac地址和对应的端口号 `arp {ip:mac}`  交换机 {mac:设备端口}  -》 实现端到端的通信

- 网关：两个子网不同发生通信 ，如果两个设备不在同一个子网下 ，需要互相访问就需要通过这个网关， 网关会进行地址转化，转化后可以访问到其他网络下 `nat`

- ipv6  是由八组 ，每个组有4位16进制值组成 ffff:8   16 * 8 = 128个1  -》 2进制值就是 2^128

## 重点在学网络的时候 关系的是协议

- `TCP/IP` 协议簇  (来表述所有的协议)
- 应用层： (`HTTP`、`DNS`)、`FTP`、`DHCP`
- 传输层协议： `TCP`  (稳当),`UDP` (会丢失)

- 网络层: `IP`协议 寻址  ` ARP`

- 因为下俩层都是物理设备 不涉及到协议 

## `DNS`协议 

`Domain name system`通过域名来解析`ip` 如果你输入的是一个域名，会将域名进行解析.主要的核心就是域名好记，所以通过域名来访问

- 域名的分级 www.baidu.com  有多少个.就是几级的   查找方式就是会先看是否默认使用本地的dns解析服务,如果配置的是其他的`ip`自动查找,如果是自己的会先查看是否缓存过， 如果没有缓存过， 会找离自己最近的根服务器，通过根服务器查找顶级域名，进行返回并`缓存`，继续像前查找。 默认`DNS`发送数据靠的是`udp` `tcp`传输数据需要建立连接（三次握手四次挥手）

> 上网的时候 发现电脑`qq`能正常使用，无法访问浏览器。 多数情况下就是`DNS`配置不正常



## 滑动窗口 
- 主要协商的是， 每次发多少数据，接收方能收到多少数据 （控制传输速率） 
- 如果接受方无法继续接受数据 就将窗口大小调整为0，  发送方会发送探测包来探测是否能继续发送数据
- 窗口的目的就能决定一次发多少数据，每次接受到数据后都会进行窗口的协商

## TCP粘包
- Nagle 算法 定义在任何时刻内最多只有一个小段被未被确认 （如果确认的非常快，那么粘包的过程就不存在了）
- cork算法 如果这个包没有达到 mss  一个帧 MTU 1500 (1460) 一次能传递1460 目的就是减少发送包的个数

## 慢开始
慢开始是非常消耗性能的，如果一旦丢包，回到慢开始 并且将ssthresh值， 丢包可能是正常现象，如果直接回到了慢开始 ，那就很耗费性能
 
例如发送数据 ABCDE 但是A在bcd 都确认收到后依旧没有收到，则直接重发A